Websocket : `localhost:10043`

### 房间有关：
路由：`ws://127.0.0.1:10043/ws/room`

房间开关机、修改风速等，发起的新请求：
```json
{
    "roomId": "100",  
    "state": "on" , 
    "speed": 0,
    "now_temp": 25.0,
    "set_temp": 23.5,
    "mode": "heat",
    "new_request": 1
}
```
state `"on"` `"off"`  
speed `0` `1` `2` 分别对应小中大风  
mode `"heat"` `"cool"`  
new_request `0` `1` 分别对应这是否是一次新的请求

服务器回复：
```json
{
    "state": "on",
    "bill": 114514.19
}
```
`"on"` `"off"`
请求成功可回复可不回复，请求失败回复`"off"`  

在被抢占或者抢占结束恢复时，服务器主动发送`"off"`或者`"on"`  
金额本地和服务器都会计算，通过该消息同步（以服务器为准）。也可不改变状态直接发送该消息同步金额

### 前台相关：
开房路由：`ws://127.0.0.1:10043/ws/checkin`  
前台客户端请求
```json
{
    "roomId": "101",
    "client_name": "name",
    "client_id": "50013420020324xxxx"
}
```
如果房间号为`000`，则后台自动分配  
服务端返回
```json
{
    "status": "OK",
    "allocate_room": "101"
}
```
如果后台返回的房间号不同，说明以后台分配为准  
status `ERR` 说明无空闲房间可以分配  

退房路由：`ws://127.0.0.1:10043/ws/checkout`  
前台客户端请求
```json
{
    "roomId": "100"
}
```
服务端返回
```json
{
    "status": "OK",
    "bill": 114.514
}
```

账单路由：`ws://127.0.0.1:10043/ws/bill`  
前台客户端请求
```json
{
    "roomId": "100"
}
```
服务端返回
```json
{
    "bill": 114.514
}
```

详单路由：`ws://127.0.0.1:10043/ws/uselist`  
前台客户端请求  
按照房间使用时间查找
```json
{
    "roomId": "100",
    "type": "room",
    "usrId": "NULL",
    "start_time": "YYYY-MM-DD HH:MM:SS",
    "end_time": "YYYY-MM-DD HH:MM:SS"
}
```
或者按照房间住户查找
```json
{
    "roomId": "100",
    "type": "usr",
    "usrId": "50013420020324xxxx",
    "start_time": "NULL",
    "end_time": "NULL"
}
```
服务端返回
```json
{
    "uselist": "str"
}
```

拓展：前台请求房间状态  
路由：`ws://127.0.0.1:10043/ws/roominfo`  
前台客户端请求
```json
{
    "request": 1
}
```
↑ 实际使用中不查看或使用请求信息当中的字段，发送任意信息即可  
服务端返回
```json
{
    "rooms": [
    {
      "roomId": "101",
      "status": "free"
    },
    {
      "roomId": "102",
      "status": "busy"
    }
  ]
}
```

### 经理相关：
路由：`ws://127.0.0.1:10043/ws/manager`  
前台客户端请求：
```json
{
    "start_time": "YYYY-MM-DD HH:MM:SS",
    "end_time": "YYYY-MM-DD HH:MM:SS"
}
```
服务端返回
```json
{
    "content": "str"
}
```

### 管理员相关：
查看房间当前信息：  
路由：`ws://127.0.0.1:10043/ws/query_room_info`  
前台客户端请求
```json
{
    "roomId": "101"
}
```
服务器回复：
```json
{
    "status": "running",
    "speed": "medium",
    "bill": 114514.19,
    "mode": "heat",
    "now_temp": 25.0,
    "set_temp": 23.5
}
```
`"running"` `"off"` `"waiting"`  

查看当前调度信息：  
路由：`ws://127.0.0.1:10043/ws/query_schedule`  
前台客户端请求
```json
{
    "request": 1
}
```
↑ 实际使用中不查看或使用请求信息当中的字段，发送任意信息即可  
服务器回复：
```json
{
    "serving_queue": [
        "101",
        "201",
        "202"
    ],
    "waiting_queue": [
        "103",
        "302"
    ]
}
```

拓展：管理员改变房间状态